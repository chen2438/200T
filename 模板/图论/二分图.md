AcWing 860. 染色法判定二分图

https://www.cwing.com/problem/content/description/862/

![](https://nme-200t.oss-cn-hangzhou.aliyuncs.com/template/202207111404151.png)

```cpp
#include <bits/stdc++.h>
#define FOR(i,a,b) for(int i=(a);i<=(b);++i)
using namespace std;

const int N = 100010;

int n, m;
int color[N];

struct Edge{
	int to,nxt;
}e[N*2];

int adt,head[N];

void add(int u,int v){
	e[++adt]={v,head[u]};
	head[u]=adt;
}

//int fa[N];

bool dfs(int p1,int col){
	color[p1] = col;
	for(int i=head[p1];i!=0;i=e[i].nxt){
		int p2=e[i].to;
		//if(p2==fa[p1]) continue;
		//fa[p2]=p1;
		if(color[p2] == col) return false;
		if(!color[p2] and !dfs(p2,3-col)) return false;
	}
	return true;
}

int main(){
    cin.tie(0)->sync_with_stdio(0);
    cin>>n>>m;
    while(m -- ){
        int a, b; cin>>a>>b;
        add(a, b), add(b, a);
    }
    int ans=1;
    FOR(i,1,n)
        if(!color[i] and !dfs(i, 1)) {ans=0; break;}
    if (ans) puts("Yes");
    else puts("No");
    return 0;
}
```

