### Acwing 102. 最佳牛围栏

https://www.acwing.com/problem/content/description/104/

![image-20220706220113631](https://nme-200t.oss-cn-hangzhou.aliyuncs.com/template/202207062201686.png)

![image-20220706220123043](https://nme-200t.oss-cn-hangzhou.aliyuncs.com/template/202207062201080.png)

#### 代码

```cpp
#include<bits/stdc++.h>
#define FOR(i,a,b) for(int i=(a);i<=(b);i++)
using namespace std;

const int N = 100010;

int n, F;
double a[N], s[N];

bool check(double avg){
    FOR(i,1,n) s[i] = s[i - 1] + (a[i] - avg);
    double mins = 1e9;
    FOR(i,F,n){
        mins = min(mins, s[i - F]);
        if (s[i] - mins >= 0) return true;
    }
    return false;
}

int main(){
    cin>>n>>F;
    double l = 0, r = 2001;
    for (int i = 1; i <= n; i ++ ){
        cin>>a[i];
        //r = max(r, a[i]);
    }
    while (r - l > 1e-5){
        double mid = (l + r) / 2;
        if (check(mid)) l = mid;
        else r = mid;
    }
    cout<<int(r*1000)<<endl;//只能取r, 不能取l, 抹去小数后可能l<r
    return 0;
}
```

