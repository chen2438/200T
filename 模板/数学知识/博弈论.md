### 公平组合游戏 ICG

公平组合游戏（Impartial Game）的定义如下：

1. 游戏有两个人参与，二者轮流做出决策，双方均知道游戏的完整信息；
2. 任意一个游戏者在某一确定状态可以作出的决策集合只与当前的状态有关，而与游戏者无关；
3. 游戏中的同一个状态不可能多次抵达，游戏以玩家无法行动为结束，且游戏一定会在有限步后以非平局结束。

### 有向图游戏

在一个有向无环图中，有一个唯一起点，上面有一个棋子，两个玩家轮流沿着有向边推动棋子，不能走的玩家判负。

大部分的公平组合游戏都可以转换为有向图游戏。

### AcWing 891. Nim游戏

#### 题目描述

![image-20220727161958507](http://nme-200t.oss-cn-hangzhou.aliyuncs.com/notes/2022-07-27-081958.png)

#### 代码

结论: n 堆石子的异或和 = 0, 先手必败, 否则先手必胜.

以小见大: n 堆石子全为 0, 异或为 0, 先手败.

若异或和 != 0, 先手一定有方法在 1 次操作内将其变为 0.

```cpp
#include<bits/stdc++.h>
#define FOR(i,a,b) for(int i=(a);i<=(b);++i)
using namespace std;

const int N = 100010;

int main(){
    int n; cin>>n;
    int res = 0;
    while (n -- ){
        int x; cin>>x;
        res ^= x;
    }
    if (res) puts("Yes");
    else puts("No");
    return 0;
}
```

### AcWing 892. 台阶-Nim游戏

#### 题目描述

![image-20220727164757501](http://nme-200t.oss-cn-hangzhou.aliyuncs.com/notes/2022-07-27-084758.png)

#### 代码

结论: 若所有奇数级台阶上的棋子的异或和 = 0, 先手必败, 否则先手必胜.

即把奇数级台阶看作经典 Nim 游戏

```cpp
#include<bits/stdc++.h>
#define FOR(i,a,b) for(int i=(a);i<=(b);++i)
using namespace std;

const int N = 100010;

int main(){
    int n; cin>>n;
    int res = 0;
    FOR(i,1,n){
        int x; cin>>x;
        if(i&1)res ^= x;
    }
    if (res) puts("Yes");
    else puts("No");
    return 0;
}
```

